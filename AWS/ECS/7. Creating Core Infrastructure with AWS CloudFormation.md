# 🏗️ Creating Core Infrastructure with AWS CloudFormation

## 📌 Overview

In this guide, we’ll create the core infrastructure required to deploy applications on AWS. Instead of setting up everything manually through the AWS Console, we'll use **AWS CloudFormation** to automate the provisioning process with a single YAML template.

---

## 🌐 Infrastructure Architecture

We are going to set up the following:

- A **Virtual Private Cloud (VPC)**
- Two **Public Subnets** in different **Availability Zones**
- An **Internet Gateway** (IGW)
- A **Public Route Table** with a default route to the IGW
- Subnet associations with the route table
- CloudFormation **Outputs** to expose created resources

---

## 🛠️ Manual vs. Automated Setup

While AWS Console allows you to create these resources manually by clicking through the UI, it’s error-prone and not scalable. With **CloudFormation**, you define everything in a YAML file and deploy it with one command using the **AWS CLI**.

---

## 📄 Understanding the CloudFormation Template

The CloudFormation YAML file includes:

### ✅ Mappings

Used to define Availability Zones and subnet configurations such as CIDR blocks.

### ✅ Resources

Includes definitions for:

- `AWS::EC2::VPC`: The main VPC block
- `AWS::EC2::Subnet`: For public subnets across AZs
- `AWS::EC2::InternetGateway`: Internet Gateway for external access
- `AWS::EC2::VPCGatewayAttachment`: To attach IGW to the VPC
- `AWS::EC2::RouteTable`: Public Route Table
- `AWS::EC2::Route`: Default route to IGW
- `AWS::EC2::SubnetRouteTableAssociation`: Associate subnets with route table

### ✅ Outputs

CloudFormation Outputs allow referencing critical information after the stack is deployed, such as:

- VPC ID
- Public Subnet IDs
- Internet Gateway ID

---

## 🧪 Deploying the Stack with AWS CLI

After saving your YAML file (e.g., `core-infrastructure-setup.yaml`), deploy it using the following CLI command:

```bash
aws cloudformation create-stack \
  --stack-name core-infrastructure \
  --template-body file://core-infrastructure-setup.yaml \
  --capabilities CAPABILITY_NAMED_IAM
